buildscript {
    repositories {
        google()
        mavenCentral()
    }

    dependencies {
        classpath("com.android.tools.build:gradle:8.3.1")
    }
}

apply plugin: 'com.android.library'

android {
    namespace 'com.melihyarikkaya.rnserialport'

    compileSdk Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)

    defaultConfig {
        minSdk Integer.parseInt(project.ANDROID_BUILD_MIN_SDK_VERSION)
        targetSdkVersion Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)
        versionCode 1
        versionName "1.0"
        testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'
    }
    buildTypes {
        release {
            minifyEnabled false
        }
    }
    lintOptions {
        abortOnError false
        disable 'GradleCompatible'
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
}

repositories {
    google()
    maven {
        // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm
        url("$rootDir/../node_modules/react-native/android")
    }
    mavenCentral()
}

allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

/**
 * The preferred build flavor of JavaScriptCore (JSC)
 *
 * For example, to use the international variant, you can use:
 * `def jscFlavor = 'org.webkit:android-jsc-intl:+'`
 *
 * The international variant includes ICU i18n library and necessary data
 * allowing to use e.g. `Date.toLocaleString` and `String.localeCompare` that
 * give correct results when using with locales other than en-US. Note that
 * this variant is about 6MiB larger per architecture than default.
 */
def jscFlavor = "org.webkit:android-jsc:+"

dependencies {
    implementation 'com.google.guava:guava:33.1.0-android'
    implementation("com.facebook.react:react-android:0.73.6")
    implementation project(":usbserial-6.1.0")
//    api project(':usbserial-6.1.0')
//    api fileTree(include: ["*.aar"], dir: "libs")
//    implementation files("libs/usbserial-6.1.0-release.aar")
//    implementation (files("libs/usbserial-6.1.0-release.aar"))
//    implementation files("libs/usbserial-6.2.1-release.aar")
//    implementation 'com.github.felHR85:UsbSerial:6.1.0'
//    implementation 'com.github.felHR85:UsbSerial:6.0.6'

    if (project.hermesEnabled.toBoolean()) {
        implementation("com.facebook.react:hermes-android:0.73.5")
    } else {
        implementation jscFlavor
    }
}
